<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Villa Blanca Welcome Menu</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F8F5F0; /* Light, warm background matching logo */
            color: #333333; /* Darker text for readability on light background */
            overflow: hidden; /* Prevent scrolling on body when modal is open */
        }
        /* Custom scrollbar for aesthetic, if content overflows */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #E0DED7;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: #A08B5C; /* Matching the gold/bronze from the logo */
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #C4B081;
        }

        /* Modal Overlay */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px); /* Safari support */
        }

        /* Hidden utility class */
        .hidden {
            display: none;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col p-4 md:p-6 lg:p-8">

    <!-- Main Content Area -->
    <div class="flex flex-grow flex-col lg:flex-row gap-4 lg:gap-6">

        <!-- Left Sidebar (Logo, Welcome, Weather, Clock, QR Code) -->
        <div class="lg:w-1/4 w-full bg-gradient-to-br from-[#E0DED7] to-[#A08B5C] text-[#333333] p-6 rounded-xl shadow-lg flex flex-col justify-between overflow-hidden">
            <div class="flex flex-col items-center mb-6">
                <!-- Hotel Logo - Updated with PLACEHOLDER for preview, original Firebase URL for deployment -->
                <img src="https://placehold.co/120x120/A08B5C/ffffff?text=VB+LOGO" alt="Villa Blanca Logo" class="w-28 h-28 rounded-full mb-4 shadow-md border-2 border-stone-300 object-contain p-2 bg-white">
                <h1 class="text-3xl font-bold text-center mb-2">VILLA BLANCA</h1>
                <p class="text-lg text-stone-700 text-center">PRIVATE RESIDENCE</p>
            </div>

            <div class="text-center mb-6 flex-grow flex flex-col justify-center">
                <!-- Welcome Message with Guest Name / Room Number -->
                <h2 class="text-2xl font-semibold mb-3" id="welcome-message">Welcome, Esteemed Guest!</h2>
                <p class="text-stone-800 text-md">We hope you enjoy your stay with us.</p>
                <p id="room-info" class="text-stone-800 text-sm mt-1"></p>
            </div>

            <div class="flex flex-col items-center mb-6 bg-white bg-opacity-70 p-4 rounded-lg shadow-inner text-stone-800">
                <!-- Live Weather -->
                <div class="text-xl font-medium mb-2">Live Weather</div>
                <div class="flex items-center space-x-2">
                    <img id="weather-icon" src="https://openweathermap.org/img/wn/04n@2x.png" alt="Weather Icon" class="w-12 h-12">
                    <span id="temperature" class="text-4xl font-bold">--°C</span>
                </div>
                <p id="weather-description" class="text-stone-700">Loading...</p>
                <p id="weather-location" class="text-stone-700 text-sm">--</p>
            </div>

            <div class="text-center mb-6 bg-white bg-opacity-70 p-4 rounded-lg shadow-inner text-stone-800">
                <!-- Live Clock -->
                <div id="live-clock" class="text-4xl font-bold"></div>
            </div>

            <div class="flex justify-center mt-auto flex-col items-center gap-4">
                <!-- QR Code (Placeholder) -->
                <img src="https://placehold.co/150x150/A08B5C/ffffff?text=SCAN+FOR+INFO" alt="QR Code" class="w-36 h-36 rounded-lg shadow-lg border-2 border-stone-300">
            </div>
        </div>

        <!-- Right Content Area (YouTube Video) -->
        <div class="lg:w-3/4 w-full flex flex-col gap-4 lg:gap-6">
            <!-- YouTube Video Box (Top Right) -->
            <div class="w-full h-96 lg:h-auto lg:flex-grow bg-stone-100 rounded-xl shadow-lg overflow-hidden flex items-center justify-center p-2">
                <div class="relative w-full h-full pb-[56.25%] overflow-hidden rounded-lg">
                    <!-- 16:9 Aspect Ratio Container -->
                    <iframe
                        class="absolute top-0 left-0 w-full h-full rounded-lg"
                        src="https://www.youtube.com/embed/WrM8Rk7LQgs?autoplay=1&mute=1&controls=0&loop=1&playlist=WrM8Rk7LQgs&start=15"
                        title="YouTube video player"
                        frameborder="0"
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                        allowfullscreen
                    ></iframe>
                </div>
            </div>
        </div>
    </div>

    <!-- Bottom Footer (App Shortcuts) -->
    <div class="w-full bg-gradient-to-r from-stone-200 to-stone-400 p-4 md:p-6 mt-4 lg:mt-6 rounded-xl shadow-lg flex justify-around items-center flex-wrap gap-4">
        <!-- App Icons -->
        <button class="app-button flex flex-col items-center text-stone-800 p-3 rounded-xl bg-stone-50 hover:bg-stone-100 transition-all duration-300 transform hover:scale-105 shadow-md" data-app="Netflix">
            <svg class="w-10 h-10 mb-1" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path d="M19.07 4.93A10 10 0 005.12 19.07A10 10 0 0019.07 4.93zM10 15.5V8.5L16 12l-6 3.5z"></path></svg>
            <span class="text-sm">Netflix</span>
        </button>
        <button class="app-button flex flex-col items-center text-stone-800 p-3 rounded-xl bg-stone-50 hover:bg-stone-100 transition-all duration-300 transform hover:scale-105 shadow-md" data-app="Hulu">
            <svg class="w-10 h-10 mb-1" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15H9V7h2v10zm4 0h-2V7h2v10z"></path></svg>
            <span class="text-sm">Hulu</span>
        </button>
        <button class="app-button flex flex-col items-center text-stone-800 p-3 rounded-xl bg-stone-50 hover:bg-stone-100 transition-all duration-300 transform hover:scale-105 shadow-md" data-app="Prime Video">
            <svg class="w-10 h-10 mb-1" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path d="M21 16V8h-6V2H9v6H3v8h6v6h6v-6h6zM11 4h2v2h-2V4zm0 16H9v-2h2v2zm10-4h-2v-2h2v2zM5 8h2V6H5V8zm0 8h2v-2H5v2zm14 0h-2v-2h2v2z"></path></svg>
            <span class="text-sm">Prime Video</span>
        </button>
        <button class="app-button flex flex-col items-center text-stone-800 p-3 rounded-xl bg-stone-50 hover:bg-stone-100 transition-all duration-300 transform hover:scale-105 shadow-md" data-app="YouTube">
            <svg class="w-10 h-10 mb-1" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM9.5 16.5v-9l7 4.5-7 4.5z"></path></svg>
            <span class="text-sm">YouTube</span>
        </button>
        <button class="app-button flex flex-col items-center text-stone-800 p-3 rounded-xl bg-stone-50 hover:bg-stone-100 transition-all duration-300 transform hover:scale-105 shadow-md" data-app="YouTube TV">
            <!-- New icon for YouTube TV (placeholder) -->
            <svg class="w-10 h-10 mb-1" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path d="M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"></path></svg>
            <span class="text-sm">YouTube TV</span>
        </button>
        <button class="app-button flex flex-col items-center text-stone-800 p-3 rounded-xl bg-stone-50 hover:bg-stone-100 transition-all duration-300 transform hover:scale-105 shadow-md" data-app="Disney Plus">
            <!-- New icon for Disney Plus (placeholder) -->
            <svg class="w-10 h-10 mb-1" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm.08 17.53c-2.31 0-4.22-1.84-4.22-4.14 0-2.07 1.49-3.79 3.51-4.04v-1.12c-1.5-.23-2.61-1.42-2.61-2.92 0-1.59 1.18-2.88 2.61-2.92V4.5c-3.87 0-7 3.13-7 7s3.13 7 7 7c.36 0 .71-.03 1.05-.09l-.49-1.92c-.3-.12-.6-.18-.9-.18z"></path></svg>
            <span class="text-sm">Disney Plus</span>
        </button>
        <button class="app-button flex flex-col items-center text-stone-800 p-3 rounded-xl bg-stone-50 hover:bg-stone-100 transition-all duration-300 transform hover:scale-105 shadow-md" data-app="Account Settings">
            <svg class="w-10 h-10 mb-1" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 2C6.47 2 2 6.47 2 12c0 3.87 2.11 7.23 5.2 9.06.4.08.55-.17.55-.38 0-.19-.01-.73-.01-1.42C5.9 18.57 5.2 17.77 5.2 17.77c-.57-1.45-1.39-1.84-1.39-1.84-.95-.65.07-.64.07-.64 1.05.07 1.6 1.08 1.6 1.08.93 1.6 2.45 1.14 3.05.87.09-.68.36-1.14.65-1.4C7.3 14.58 4.6 13.52 4.6 9.5c0-1.05.37-1.92 1.03-2.59-.1-.26-.45-1.23.1-2.58 0 0 .84-.26 2.75 1 .8-.22 1.64-.33 2.49-.33.85 0 1.69.11 2.49.33 1.91-1.26 2.75-1 2.75-1 .55 1.35.2 2.32.1 2.58.66.67 1.03 1.54 1.03 2.59 0 4.04-2.7 5.1-5.31 5.42.41.35.79 1.03.79 2.08 0 1.5-.01 2.7-.01 3.07 0 .21.14.46.55.38C19.89 19.23 22 15.87 22 12c0-5.53-4.47-10-10-10z"></path></svg>
            <span class="text-sm">Account</span>
        </button>
    </div>

    <!-- App Instructions Modal -->
    <div id="app-instructions-modal" class="modal-overlay hidden">
        <div class="bg-stone-800 text-white rounded-xl shadow-2xl p-6 w-11/12 max-w-lg flex flex-col max-h-[400px]">
            <div class="flex justify-between items-center mb-4 pb-2 border-b border-stone-700">
                <h3 class="text-2xl font-bold" id="app-instructions-title">App Instructions</h3>
                <button id="close-app-instructions-btn" class="text-stone-400 hover:text-white text-3xl leading-none">&times;</button>
            </div>
            <div id="app-instructions-content" class="flex-grow overflow-y-auto pr-2 mb-4">
                <!-- Instructions will be loaded here -->
            </div>
        </div>
    </div>

    <script>
        // API Keys (PLACEHOLDERS - REPLACE WITH YOUR ACTUAL KEYS!)
        // Get your OpenWeatherMap API key from: https://openweathermap.org/api
        const OPENWEATHER_API_KEY = 'b8c65d3e969fa63ecf76eb4ff6069169'; // YOUR ACTUAL KEY
        const WEATHER_CITY = 'Tavares'; // Changed to just 'Tavares' for better API compatibility

        // JavaScript for Live Clock
        function updateClock() {
            const now = new Date();
            let hours = now.getHours();
            const minutes = now.getMinutes().toString().padStart(2, '0');
            const seconds = now.getSeconds().toString().padStart(2, '0');
            const ampm = hours >= 12 ? 'PM' : 'AM';
            hours = hours % 12;
            hours = hours ? hours : 12; // the hour '0' should be '12'
            const timeString = `${hours}:${minutes}:${seconds} ${ampm}`;
            document.getElementById('live-clock').textContent = timeString;
        }

        // Update clock every second
        setInterval(updateClock, 1000);
        updateClock(); // Initial call to display clock immediately

        // Function to parse URL parameters for personalization
        function getUrlParameter(name) {
            name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
            var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
            var results = regex.exec(location.search);
            return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
        }

        // Apply personalization from URL parameters
        window.onload = function() {
            const guestName = getUrlParameter('name');
            const roomNumber = getUrlParameter('room');

            if (guestName) {
                document.getElementById('welcome-message').textContent = `Welcome, ${guestName}!`;
            }
            if (roomNumber) {
                document.getElementById('room-info').textContent = `Room: ${roomNumber}`;
            }

            // Fetch weather on load
            fetchWeather();
        };


        // Function to fetch Live Weather
        async function fetchWeather() {
            if (!OPENWEATHER_API_KEY || OPENWEATHER_API_KEY === 'YOUR_OPENWEATHER_API_KEY') {
                console.warn("OpenWeatherMap API key is not set. Weather data will not be fetched.");
                document.getElementById('weather-description').textContent = "Weather unavailable (API Key missing)";
                document.getElementById('weather-location').textContent = "";
                return;
            }

            const weatherUrl = `https://api.openweathermap.org/data/2.5/weather?q=${WEATHER_CITY}&appid=${OPENWEATHER_API_KEY}&units=metric`; // units=metric for Celsius

            try {
                const response = await fetch(weatherUrl);
                const data = await response.json();

                if (response.ok && data.main && data.weather && data.name) {
                    document.getElementById('temperature').textContent = `${Math.round(data.main.temp)}°C`;
                    document.getElementById('weather-description').textContent = data.weather[0].description.charAt(0).toUpperCase() + data.weather[0].description.slice(1);
                    document.getElementById('weather-icon').src = `https://openweathermap.org/img/wn/${data.weather[0].icon}@2x.png`;
                    document.getElementById('weather-location').textContent = `${data.name}, ${data.sys.country}`;
                } else {
                    // Log the specific error message from the API if available
                    const errorMessage = data.message || "Unknown API error";
                    document.getElementById('weather-description').textContent = `Weather data unavailable: ${errorMessage}`;
                    document.getElementById('weather-location').textContent = "Please check API key or city.";
                    console.error("Error fetching weather: ", errorMessage, data);
                }
            } catch (error) {
                document.getElementById('weather-description').textContent = "Failed to load weather (Network error).";
                document.getElementById('weather-location').textContent = "";
                console.error("Error fetching weather (network/parse):", error);
            }
        }

        // App Instructions Modal Logic
        const appButtons = document.querySelectorAll('.app-button');
        const appInstructionsModal = document.getElementById('app-instructions-modal');
        const closeAppInstructionsBtn = document.getElementById('close-app-instructions-btn');
        const appInstructionsTitle = document.getElementById('app-instructions-title');
        const appInstructionsContent = document.getElementById('app-instructions-content');

        const appInstructions = {
            "Netflix": `
                <p class="mb-2">To open Netflix:</p>
                <ol class="list-decimal pl-5 space-y-1">
                    <li>Press the <strong class="font-semibold">Home</strong> or <strong class="font-semibold">Smart TV</strong> button on your TV remote.</li>
                    <li>Navigate to the <strong class="font-semibold">Netflix app</strong> and select it.</li>
                    <li>Log in with your existing Netflix account.</li>
                </ol>
                <p class="mt-4 text-sm text-gray-400">If you experience issues, please contact the front desk.</p>
                <div class="mt-4 flex justify-center">
                    <img src="https://placehold.co/150x150/e50914/ffffff?text=Netflix+QR" alt="Netflix Help QR" class="w-32 h-32 rounded-lg shadow">
                </div>
                <p class="mt-2 text-center text-sm text-gray-400">Scan for more info</p>
            `,
            "Hulu": `
                <p class="mb-2">To open Hulu:</p>
                <ol class="list-decimal pl-5 space-y-1">
                    <li>Press the <strong class="font-semibold">Home</strong> or <strong class="font-semibold">Smart TV</strong> button on your TV remote.</li>
                    <li>Find and select the <strong class="font-semibold">Hulu app</strong>.</li>
                    <li>Sign in to your Hulu account to begin streaming.</li>
                </ol>
                <p class="mt-4 text-sm text-gray-400">If you experience issues, please contact the front desk.</p>
                <div class="mt-4 flex justify-center">
                    <img src="https://placehold.co/150x150/1ce783/000000?text=Hulu+QR" alt="Hulu Help QR" class="w-32 h-32 rounded-lg shadow">
                </div>
                <p class="mt-2 text-center text-sm text-gray-400">Scan for more info</p>
            `,
            "Prime Video": `
                <p class="mb-2">To open Prime Video:</p>
                <ol class="list-decimal pl-5 space-y-1">
                    <li>Press the <strong class="font-semibold">Home</strong> or <strong class="font-semibold">Smart TV</strong> button on your TV remote.</li>
                    <li>Locate and launch the <strong class="font-semibold">Prime Video app</strong>.</li>
                    <li>Use your Amazon account to sign in and watch.</li>
                </ol>
                <p class="mt-4 text-sm text-gray-400">If you experience issues, please contact the front desk.</p>
                 <div class="mt-4 flex justify-center">
                    <img src="https://placehold.co/150x150/00A8E1/ffffff?text=Prime+Video+QR" alt="Prime Video Help QR" class="w-32 h-32 rounded-lg shadow">
                </div>
                <p class="mt-2 text-center text-sm text-gray-400">Scan for more info</p>
            `,
            "YouTube": `
                <p class="mb-2">To open YouTube:</p>
                <ol class="list-decimal pl-5 space-y-1">
                    <li>Press the <strong class="font-semibold">Home</strong> or <strong class="font-semibold">Smart TV</strong> button on your TV remote.</li>
                    <li>Select the <strong class="font-semibold">YouTube app</strong> from your TV's apps.</li>
                    <li>You can browse and watch videos, or sign in for personalized content.</li>
                </ol>
                <p class="mt-4 text-sm text-gray-400">If you experience issues, please contact the front desk.</p>
                 <div class="mt-4 flex justify-center">
                    <img src="https://placehold.co/150x150/FF0000/ffffff?text=YouTube+QR" alt="YouTube Help QR" class="w-32 h-32 rounded-lg shadow">
                </div>
                <p class="mt-2 text-center text-sm text-gray-400">Scan for more info</p>
            `,
            "YouTube TV": `
                <p class="mb-2">To open YouTube TV:</p>
                <ol class="list-decimal pl-5 space-y-1">
                    <li>Press the <strong class="font-semibold">Home</strong> or <strong class="font-semibold">Smart TV</strong> button on your TV remote.</li>
                    <li>Find and select the <strong class="font-semibold">YouTube TV app</strong>.</li>
                    <li>Sign in with your YouTube TV account to watch live TV.</li>
                </ol>
                <p class="mt-4 text-sm text-gray-400">If you experience issues, please contact the front desk.</p>
                <div class="mt-4 flex justify-center">
                    <img src="https://placehold.co/150x150/CC0000/ffffff?text=YT+TV+QR" alt="YouTube TV Help QR" class="w-32 h-32 rounded-lg shadow">
                </div>
                <p class="mt-2 text-center text-sm text-gray-400">Scan for more info</p>
            `,
            "Disney Plus": `
                <p class="mb-2">To open Disney+:</p>
                <ol class="list-decimal pl-5 space-y-1">
                    <li>Press the <strong class="font-semibold">Home</strong> or <strong class="font-semibold">Smart TV</strong> button on your TV remote.</li>
                    <li>Locate and launch the <strong class="font-semibold">Disney+ app</strong>.</li>
                    <li>Log in with your Disney+ account to start watching.</li>
                </ol>
                <p class="mt-4 text-sm text-gray-400">If you experience issues, please contact the front desk.</p>
                <div class="mt-4 flex justify-center">
                    <img src="https://placehold.co/150x150/113366/ffffff?text=Disney%2B+QR" alt="Disney Plus Help QR" class="w-32 h-32 rounded-lg shadow">
                </div>
                <p class="mt-2 text-center text-sm text-gray-400">Scan for more info</p>
            `,
            "Account Settings": `
                <p class="mb-2">To access TV or Hotel Account Settings:</p>
                <ol class="list-decimal pl-5 space-y-1">
                    <li>Use your TV remote to navigate to the <strong class="font-semibold">Settings menu</strong>.</li>
                    <li>Look for options like "System," "Account," or "Hotel Mode" to adjust preferences.</li>
                    <li>Please be aware that some settings may be restricted by the hotel for your convenience.</li>
                </ol>
                <p class="mt-4 text-sm text-gray-400">For specific hotel account inquiries, please contact the front desk directly.</p>
                 <div class="mt-4 flex justify-center">
                    <img src="https://placehold.co/150x150/60a5fa/ffffff?text=Settings+QR" alt="Settings Help QR" class="w-32 h-32 rounded-lg shadow">
                </div>
                <p class="mt-2 text-center text-sm text-gray-400">Scan for more info</p>
            `
        };

        appButtons.forEach(button => {
            button.addEventListener('click', () => {
                const appName = button.dataset.app;
                appInstructionsTitle.textContent = `${appName} Instructions`;
                appInstructionsContent.innerHTML = appInstructions[appName] || '<p>Instructions not available for this app.</p>';
                appInstructionsModal.classList.remove('hidden');
            });
        });

        closeAppInstructionsBtn.addEventListener('click', () => {
            appInstructionsModal.classList.add('hidden');
        });

    </script>
</body>
</html>
