<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Villa Blanca Welcome Menu</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Lora for all text -->
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Lora', serif; /* Default font for all text */
            background-color: #F8F5F0; /* Light, warm background matching logo */
            color: #333333; /* Darker text for readability on light background */
            min-height: 100vh; /* Ensure body takes full viewport height */
            height: 100vh; /* Explicitly set height to ensure flex container works */
            overflow: hidden; /* Prevent main body scroll */
            display: flex; /* Make body a flex container */
            flex-direction: column; /* Stack children vertically */
        }
        /* Specific styling for digital time parts */
        .digital-time {
            font-weight: 700; /* Bold for the numbers */
        }
        .digital-time .ampm {
            font-size: 0.6em; /* Smaller relative to the main time */
            vertical-align: super; /* Slightly raise it */
            font-weight: 400; /* Lighter weight for AM/PM */
        }
        /* Specific style for prominent local time */
        #tavares-time {
            font-size: 2.5rem; /* Slightly reduced for better fit */
            line-height: 1;
        }
        #tavares-time + .text-base { /* Adjust margin for "Tavares, FL (Local)" */
            margin-bottom: 0.5rem; /* Slightly less space below local time label */
        }

        /* Custom scrollbar for aesthetic, if content overflows */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #E0DED7;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: #A08B5C; /* Matching the gold/bronze from the logo */
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #C4B081;
        }

        /* Modal Overlay */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px); /* Safari support */
        }

        /* Hidden utility class */
        .hidden {
            display: none;
        }

        /* Styling for app logos */
        .app-logo {
            width: 40px;
            height: 40px;
            object-fit: contain;
            margin-bottom: 4px;
            background-color: rgba(0, 0, 0, 0.1);
            border-radius: 4px;
            padding: 2px;
        }
    </style>
</head>
<body class="p-4 md:p-6 lg:p-8">

    <!-- Main Content Area -->
    <div class="flex flex-grow flex-col lg:flex-row gap-4 lg:gap-6 opacity-0 transition-opacity duration-1000" id="main-content-area">

        <!-- Left Sidebar (Logo, Welcome, Weather, Clock, Wi-Fi Info, Property Guide Button) -->
        <div class="lg:w-1/4 w-full bg-gradient-to-br from-[#E0DED7] to-[#A08B5C] text-[#333333] p-6 rounded-xl shadow-lg flex flex-col justify-between overflow-y-auto" style="min-height: 400px;">
            <div class="flex flex-col items-center mb-6">
                <!-- Villa Blanca Logo -->
                <img src="images/villa_blanca_logo.png" alt="Villa Blanca Logo" class="w-48 h-48 rounded-full mb-4 shadow-md border-2 border-stone-300 object-contain p-2 bg-white">
            </div>

            <div class="text-center mb-6 flex-grow flex flex-col justify-center">
                <!-- Welcome Message with Guest Name / Room Number - Adjusted font sizes -->
                <h2 class="text-4xl font-semibold mb-3" id="welcome-message">Welcome Guest</h2>
                <p class="text-stone-800 text-lg">Welcome to Villa Blanca. We are delighted to have you and trust your stay will be exceptional.</p>
                <p id="room-info" class="text-stone-800 text-sm mt-1"></p>
            </div>

            <div class="flex flex-col items-center mb-6 bg-white bg-opacity-70 p-4 rounded-lg shadow-inner text-stone-800">
                <!-- Live Weather -->
                <div class="text-xl font-medium mb-2">Live Weather</div>
                <div class="flex items-center space-x-2">
                    <img id="weather-icon" src="https://openweathermap.org/img/wn/04n@2x.png" alt="Weather Icon" class="w-12 h-12">
                    <span id="temperature" class="text-4xl font-bold">--Â°F</span>
                </div>
                <p id="weather-description">Loading...</p>
                <p id="weather-location" class="text-sm">--</p>
            </div>

            <div class="text-center mb-6 bg-white bg-opacity-70 p-4 rounded-lg shadow-inner text-stone-800 flex flex-col gap-2"> <!-- Reduced gap -->
                <!-- Current Time - World Clock Section -->
                <div class="text-xl font-medium">Current Times</div>
                <div class="flex flex-col items-center">
                    <span class="digital-time text-4xl" id="tavares-time">--:--:-- <span class="ampm">--</span></span>
                    <span class="text-base text-stone-700 mt-1">Tavares, FL (Local)</span>
                </div>
                <div class="flex flex-col items-center mt-2"> <!-- Reduced mt -->
                    <span class="digital-time text-2xl" id="london-time">--:--:-- <span class="ampm">--</span></span>
                    <span class="text-sm text-stone-700">London, UK</span>
                </div>
                <div class="flex flex-col items-center mt-2"> <!-- Reduced mt -->
                    <span class="digital-time text-2xl" id="tokyo-time">--:--:-- <span class="ampm">--</span></span>
                    <span class="text-sm text-stone-700">Tokyo, Japan</span>
                </div>
            </div>

            <!-- Daily Highlight Section -->
            <div class="text-center mb-6 bg-white bg-opacity-70 p-4 rounded-lg shadow-inner text-stone-800">
                <div class="text-xl font-medium mb-2">Daily Highlight</div>
                <p class="text-stone-700 text-base">Complimentary fresh pastries and coffee are available in the lounge until 10 AM.</p>
            </div>

            <!-- Wi-Fi & Guest Support Section -->
            <div class="flex justify-center mt-auto flex-col items-center gap-3 bg-white bg-opacity-70 p-4 rounded-lg shadow-inner text-stone-800"> <!-- Reduced gap -->
                <!-- Wi-Fi Login Info -->
                <div class="text-xl font-medium mb-2 flex items-center gap-2">
                    <img src="images/wifi_logo.png" alt="Wi-Fi Logo" class="w-8 h-8 object-contain">
                    Wi-Fi Access
                </div>
                <p class="text-stone-700 text-md"><strong>SSID:</strong> VillaBlanca Guest</p>
                <p class="text-stone-700 text-md"><strong>Password:</strong> WelcometoVB</p>
                <div class="border-t border-stone-300 w-full pt-3 mt-3"> <!-- Reduced padding/margin -->
                    <div class="text-xl font-medium mb-2">Guest Support</div>
                    <p class="text-stone-700 text-md"><strong>Your Host:</strong> +1 (555) 123-4567</p>
                    <p class="text-stone-700 text-md"><strong>Local Assistance:</strong> +1 (555) 987-6543</p>
                </div>
            </div>

            <!-- New: Property Guide Button -->
            <button id="open-villa-blanca-guide-main" class="mt-4 px-6 py-3 bg-[#A08B5C] text-white font-bold rounded-full shadow-lg hover:bg-[#85764D] transition-all duration-300 transform hover:scale-105 flex items-center justify-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6">
                    <path fill-rule="evenodd" d="M3.75 6.75a3 3 0 0 0-3 3v6a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3V9.75a3 3 0 0 0-3-3H3.375ZM4.5 9.75a1.5 1.5 0 0 0 0 3h8.25a1.5 1.5 0 0 0 0-3H4.5ZM16.5 9.75a1.5 1.5 0 0 0 0 3h.75a1.5 1.5 0 0 0 0-3h-.75Z" clip-rule="evenodd" />
                </svg>
                Property Guide
            </button>
        </div>

        <!-- Right Content Area (YouTube Video & Curated Experiences) -->
        <div class="lg:w-3/4 w-full flex flex-col gap-4 lg:gap-6">
            <!-- YouTube Video Box (Top Right) -->
            <div class="w-full h-96 lg:h-auto lg:flex-grow bg-stone-100 rounded-xl shadow-lg overflow-hidden flex items-center justify-center p-2 relative">
                <div class="relative w-full h-full pb-[56.25%] overflow-hidden rounded-lg">
                    <!-- 16:9 Aspect Ratio Container -->
                    <iframe
                        class="absolute top-0 left-0 w-full h-full rounded-lg"
                        src="https://www.youtube.com/embed/WrM8Rk7LQgs?autoplay=1&mute=1&controls=0&loop=1&playlist=WrM8Rk7LQgs&start=15"
                        title="YouTube video player"
                        frameborder="0"
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                        allowfullscreen
                    ></iframe>
                </div>
                <!-- Mute/Unmute Button -->
                <button id="mute-toggle-btn" class="absolute top-4 right-4 bg-stone-800 text-white p-2 rounded-full shadow-md hover:bg-stone-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-stone-400">
                    <svg id="volume-high-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6">
                        <path d="M13.5 4.06c0-1.336-1.616-2.005-2.56-1.06l-1.75 1.75V4.7c0-.26-.11-.51-.3-.7L8.23 2.226A2.25 2.25 0 005.465 3.5L3.4 3.5A2.25 2.25 0 001.15 5.75v12.5A2.25 2.25 0 003.4 20.5h2.065a2.25 2.25 0 001.765-1.025l1.725-1.725a2.25 2.25 0 00.305-.724v-.082l-.02-.017ZM16.5 13.5a1.5 1.5 0 000-3v3ZM15 9.75a3 3 0 110 6-3 3 0 010-6Z" />
                        <path fill-rule="evenodd" d="M19.78 20.03a.75.75 0 01-1.06 0L12 13.31l-6.72 6.72a.75.75 0 01-1.06-1.06l6.72-6.72-6.72-6.72a.75.75 0 011.06-1.06l6.72 6.72 6.72-6.72a.75.75 0 011.06 1.06l-6.72 6.72 6.72 6.72z" clip-rule="evenodd" />
                    </svg>
                    <svg id="volume-off-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6 hidden">
                        <path fill-rule="evenodd" d="M9.345 3.038A2.25 2.25 0 0 1 12 2.25c1.053 0 1.956.65 2.345 1.538l.121.284c1.124 2.623 3.056 4.603 5.237 5.923.762.456 1.36 1.095 1.653 1.861a2.25 2.25 0 0 1 0 2.66c-.293.766-.891 1.405-1.653 1.861-2.181 1.32-4.113 3.299-5.237 5.923l-.121.284A2.25 2.25 0 0 1 12 21.75c-1.053 0-1.956-.65-2.345-1.538l-.121-.284C8.41 17.345 6.478 15.365 4.3 14.045c-.762-.456-1.36-1.095-1.653-1.861a2.25 2.25 0 0 1 0-2.66c.293-.766.891-1.405 1.653-1.861 2.181-1.32 4.113-3.299 5.237-5.923l.121-.284Z" clip-rule="evenodd" />
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <!-- Bottom Footer (App Instructions & Villa Blanca Guide) -->
    <div class="w-full bg-gradient-to-r from-stone-200 to-stone-400 p-4 md:p-6 mt-4 lg:mt-6 rounded-xl shadow-lg flex justify-around items-center flex-wrap gap-4">
        <div class="flex flex-col items-center justify-center text-center flex-grow">
            <h3 class="text-xl font-semibold mb-2">Accessing Your Favorite Streaming Apps</h3>
            <p class="text-stone-700 max-w-2xl">
                To enjoy Netflix, Hulu, Prime Video, YouTube, YouTube TV, Disney+, and more, simply:
            </p>
            <ol class="list-decimal list-inside text-left text-stone-700 mt-2">
                <li>Press the <strong class="font-bold">HOME</strong> or <strong class="font-bold">SMART TV</strong> button on your TV remote.</li>
                <li>Navigate to the desired app (e.g., Netflix, Hulu) and select it.</li>
                <li>Sign in with your personal account to begin watching!</li>
            </ol>
        </div>
        <div class="border-l border-stone-300 h-20 mx-4 hidden md:block"></div> <!-- Vertical divider -->
        <button id="open-villa-blanca-guide" class="px-6 py-3 bg-[#A08B5C] text-white font-bold rounded-full shadow-lg hover:bg-[#85764D] transition-all duration-300 transform hover:scale-105 flex items-center justify-center gap-2 flex-shrink-0">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6">
                <path fill-rule="evenodd" d="M3.75 6.75a3 3 0 0 0-3 3v6a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3V9.75a3 3 0 0 0-3-3H3.375ZM4.5 9.75a1.5 1.5 0 0 0 0 3h8.25a1.5 1.5 0 0 0 0-3H4.5ZM16.5 9.75a1.5 1.5 0 0 0 0 3h.75a1.5 1.5 0 0 0 0-3h-.75Z" clip-rule="evenodd" />
            </svg>
            Villa Blanca Guide
        </button>
    </div>

    <!-- Villa Blanca Guide Modal -->
    <div id="villa-blanca-guide-modal" class="modal-overlay hidden">
        <div class="bg-white text-[#333333] rounded-xl shadow-2xl p-6 w-11/12 max-w-2xl flex flex-col h-3/4 max-h-[700px] overflow-y-auto">
            <div class="flex justify-between items-center mb-4 pb-2 border-b border-stone-300">
                <h3 class="text-2xl font-bold">Villa Blanca Guide</h3>
                <button id="close-villa-blanca-guide-btn" class="text-stone-400 hover:text-stone-700 text-3xl leading-none">&times;</button>
            </div>
            <div class="prose max-w-none text-left text-stone-700">
                <p>Welcome to your personal compendium for Villa Blanca. We aim to make your stay as comfortable and enjoyable as possible. Below you will find key information about the residence and surrounding area.</p>

                <h4 class="text-xl font-semibold mt-6 mb-2">Residences & Amenities</h4>
                <ul>
                    <li><strong>Your Suite:</strong> Details about your specific suite features.</li>
                    <li><strong>Common Areas:</strong> Access to the pool, fitness center, and communal lounges.</li>
                    <li><strong>Wi-Fi:</strong> See main screen for login details.</li>
                    <li><strong>Daily Services:</strong> Housekeeping schedule and linen service.</li>
                </ul>

                <h4 class="text-xl font-semibold mt-6 mb-2">Local Recommendations</h4>
                <ul>
                    <li><strong>Dining:</strong> Our curated list of local fine dining and casual eateries.</li>
                    <li><strong>Activities:</strong> Suggestions for golf, water sports, nature trails, and more in Tavares.</li>
                    <li><strong>Shopping:</strong> Nearby boutiques and essential stores.</li>
                </ul>

                <h4 class="text-xl font-semibold mt-6 mb-2">Guest Support</h4>
                <p>For any assistance during your stay, please contact:</p>
                <ul>
                    <li><strong>Your Host:</strong> +1 (555) 123-4567 (Primary contact for immediate needs)</li>
                    <li><strong>Local Assistance:</strong> +1 (555) 987-6543 (General inquiries or non-urgent matters)</li>
                </ul>

                <h4 class="text-xl font-semibold mt-6 mb-2">Check-Out Procedures</h4>
                <p>A gentle reminder of check-out time and procedures. Please ensure all personal belongings are collected.</p>
                <p class="text-sm italic mt-4">This digital guide is designed for your convenience. Please feel free to reach out with any further questions.</p>
            </div>
        </div>
    </div>


    <script>
        // API Keys
        const OPENWEATHER_API_KEY = 'b8c65d3e969fa63ecf76eb4ff6069169'; // YOUR ACTUAL KEY
        const WEATHER_CITY = 'Tavares'; // Set to Tavares, FL

        // JavaScript for Live Weather
        async function fetchWeather() {
            if (!OPENWEATHER_API_KEY || OPENWEATHER_API_KEY === 'YOUR_OPENWEATHER_API_KEY') {
                console.warn("OpenWeatherMap API key is not set. Weather data will not be fetched.");
                document.getElementById('weather-description').textContent = "Weather unavailable (API Key missing)";
                document.getElementById('weather-location').textContent = "";
                return;
            }

            // Units changed to 'imperial' for Fahrenheit
            const weatherUrl = `https://api.openweathermap.org/data/2.5/weather?q=${WEATHER_CITY}&appid=${OPENWEATHER_API_KEY}&units=imperial`;

            try {
                const response = await fetch(weatherUrl);
                const data = await response.json();

                if (response.ok && data.main && data.weather && data.name) {
                    // Updated temperature display for Fahrenheit
                    document.getElementById('temperature').textContent = `${Math.round(data.main.temp)}Â°F`;
                    document.getElementById('weather-description').textContent = data.weather[0].description.charAt(0).toUpperCase() + data.weather[0].description.slice(1);
                    document.getElementById('weather-icon').src = `https://openweathermap.org/img/wn/${data.weather[0].icon}@2x.png`;
                    document.getElementById('weather-location').textContent = `${data.name}, ${data.sys.country}`;
                } else {
                    const errorMessage = data.message || "Unknown API error";
                    document.getElementById('weather-description').textContent = `Weather data unavailable: ${errorMessage}`;
                    document.getElementById('weather-location').textContent = "Please check API key or city.";
                    console.error("Error fetching weather: ", errorMessage, data);
                }
            } catch (error) {
                document.getElementById('weather-description').textContent = "Failed to load weather (Network error).";
                document.getElementById('weather-location').textContent = "";
                console.error("Error fetching weather (network/parse):", error);
            }
        }

        // JavaScript for World Digital Clock
        function updateWorldDigitalClocks() {
            const options = {
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hour12: true
            };

            const formatTime = (date, options) => {
                const parts = new Intl.DateTimeFormat('en-US', options).formatToParts(date);
                let hour = parts.find(p => p.type === 'hour').value;
                let minute = parts.find(p => p.type === 'minute').value;
                let second = parts.find(p => p.type === 'second').value;
                let ampm = parts.find(p => p.type === 'dayPeriod').value;

                return `${hour}:${minute}:${second} <span class="ampm">${ampm}</span>`;
            };


            const now = new Date();

            // Tavares (Local time, assuming it's the device's local time)
            document.getElementById('tavares-time').innerHTML = formatTime(now, options);

            // London Time
            document.getElementById('london-time').innerHTML = formatTime(now, { ...options, timeZone: 'Europe/London' });

            // Tokyo Time
            document.getElementById('tokyo-time').innerHTML = formatTime(now, { ...options, timeZone: 'Asia/Tokyo' });
        }

        // Clock initialization and update interval
        setInterval(updateWorldDigitalClocks, 1000); // Update every second
        updateWorldDigitalClocks(); // Initial call to set clocks immediately

        // Function to parse URL parameters for personalization
        function getUrlParameter(name) {
            name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
            var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
            var results = regex.exec(location.search);
            return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
        }

        // Apply personalization from URL parameters
        window.onload = function() {
            const guestName = getUrlParameter('name');
            const roomNumber = getUrlParameter('room');

            if (guestName) {
                // If a guest name is provided via URL, use it
                document.getElementById('welcome-message').textContent = `Welcome, ${guestName}`;
            } else {
                // Otherwise, default to "Welcome Guest"
                document.getElementById('welcome-message').textContent = `Welcome Guest`;
            }
            if (roomNumber) {
                document.getElementById('room-info').textContent = `Room: ${roomNumber}`;
            }

            // Fade in the main content area
            document.getElementById('main-content-area').classList.remove('opacity-0');
            document.getElementById('main-content-area').classList.add('opacity-100');

            // Fetch weather on load
            fetchWeather();
        };

        // Mute/Unmute Toggle for Video
        const muteToggleButton = document.getElementById('mute-toggle-btn');
        const volumeHighIcon = document.getElementById('volume-high-icon');
        const volumeOffIcon = document.getElementById('volume-off-icon');
        let isMuted = true; // Initial state based on iframe src

        muteToggleButton.addEventListener('click', () => {
            const iframe = document.querySelector('iframe');
            if (iframe) {
                const src = iframe.src;
                if (isMuted) {
                    iframe.src = src.replace('mute=1', 'mute=0');
                    volumeHighIcon.classList.remove('hidden');
                    volumeOffIcon.classList.add('hidden');
                    isMuted = false;
                } else {
                    iframe.src = src.replace('mute=0', 'mute=1');
                    volumeHighIcon.classList.add('hidden');
                    volumeOffIcon.classList.remove('hidden');
                    isMuted = true;
                }
            }
        });

        // Villa Blanca Guide Modal Logic
        const openGuideButton = document.getElementById('open-villa-blanca-guide');
        const villaBlancaGuideModal = document.getElementById('villa-blanca-guide-modal');
        const closeGuideButton = document.getElementById('close-villa-blanca-guide-btn');

        openGuideButton.addEventListener('click', () => {
            villaBlancaGuideModal.classList.remove('hidden');
        });

        closeGuideButton.addEventListener('click', () => {
            villaBlancaGuideModal.classList.add('hidden');
        });
    </script>
</body>
</html>
