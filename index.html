<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Villa Blanca Welcome Menu</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Lora for all text -->
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Lora', serif;
            background-color: #F8F5F0; 
            color: #333333; 
        }
        .digital-time {
            font-family: 'Lora', serif;
            font-weight: 700;
        }
        .digital-time .ampm {
            font-size: 0.6em; 
            vertical-align: super;
            font-weight: 400; 
        }
        /* Custom scrollbar - We hide this now, but good to keep just in case */
        ::-webkit-scrollbar {
            width: 0px;
            background: transparent; /* make scrollbar transparent */
        }
    </style>
</head>
<!-- Grid layout remains the best approach for this -->
<body class="h-screen grid grid-rows-[1fr_auto] gap-4 p-4 overflow-hidden">

    <!-- Main Content Area (First Grid Row) -->
    <div class="flex flex-col lg:flex-row gap-4 lg:gap-5 min-h-0">

        <!-- Left Sidebar -->
        <div class="lg:w-1/4 w-full bg-gradient-to-br from-[#E0DED7] to-[#A08B5C] text-[#333333] p-4 rounded-xl shadow-lg flex flex-col">
            
            <!-- Logo Section -->
            <div class="flex-shrink-0 flex flex-col items-center">
                <img src="images/villa_blanca_logo.png"
                     alt="Villa Blanca Logo" class="w-40 h-40 sm:w-48 sm:h-48 rounded-full mb-2 shadow-md border-2 border-stone-300 object-contain p-2 bg-white"
                     onerror="this.onerror=null; this.src='https://placehold.co/256x256/F8F5F0/333333?text=VB';">
            </div>

            <!-- Welcome Section (Grows to fill space) -->
            <div class="text-center my-auto flex-grow flex flex-col justify-center">
                <h2 class="text-2xl sm:text-3xl font-semibold" id="welcome-message">Welcome Guest</h2>
                <p class="text-sm text-stone-800" id="current-date">...</p>
                <p class="text-xs text-stone-800 mt-1">Welcome to Villa Blanca. We are delighted to have you.</p>
                <p id="room-info" class="text-xs text-stone-800"></p>
            </div>

            <!-- Widgets container for better spacing -->
            <div class="flex-shrink-0 flex flex-col gap-2">
                <!-- Live Weather -->
                <!-- FIXED: Re-added weather-description element and rearranged for clarity -->
                <div class="flex items-center justify-center bg-white bg-opacity-70 p-2 rounded-lg shadow-inner text-stone-800 gap-4">
                    <div class="flex items-center space-x-2">
                        <img id="weather-icon" src="https://openweathermap.org/img/wn/04n@2x.png" alt="Weather Icon" class="w-10 h-10">
                        <span id="temperature" class="text-3xl font-bold">--°F</span>
                    </div>
                    <div class="text-center">
                        <p id="weather-description" class="text-base font-medium capitalize">Loading...</p>
                        <p id="weather-location" class="text-xs text-stone-700 -mt-1">--</p>
                    </div>
                </div>

                <!-- World Clock Section -->
                <div class="text-center bg-white bg-opacity-70 p-2 rounded-lg shadow-inner text-stone-800 flex items-center justify-around">
                    <div class="flex flex-col items-center">
                        <span class="digital-time text-2xl" id="tavares-time">--:--<span class="ampm">--</span></span>
                        <span class="text-xs text-stone-700">Local</span>
                    </div>
                    <div class="flex flex-col items-center">
                        <span class="digital-time text-2xl" id="london-time">--:--<span class="ampm">--</span></span>
                        <span class="text-xs text-stone-700">London</span>
                    </div>
                    <div class="flex flex-col items-center">
                        <span class="digital-time text-2xl" id="tokyo-time">--:--<span class="ampm">--</span></span>
                        <span class="text-xs text-stone-700">Tokyo</span>
                    </div>
                </div>

                <!-- Wi-Fi Login Info -->
                <div class="flex flex-col items-center gap-1 bg-white bg-opacity-70 p-2 rounded-lg shadow-inner text-stone-800">
                    <div class="text-base font-medium flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5"><path d="M5 12.55a8 8 0 0 1 14 0"></path><path d="M2 8.82a15 15 0 0 1 20 0"></path><path d="M8.5 16.25a4 4 0 0 1 7 0"></path><line x1="12" y1="20" x2="12.01" y2="20"></line></svg>
                        Wi-Fi Access
                    </div>
                    <p class="text-sm text-stone-700"><strong>SSID:</strong> VillaBlanca Guest / <strong>Pass:</strong> WelcometoVB</p>
                </div>
            </div>
        </div>

        <!-- Right Content Area (YouTube Video) -->
        <div class="lg:w-3/4 w-full flex flex-col">
            <div class="w-full h-full bg-stone-100 rounded-xl shadow-lg overflow-hidden flex items-center justify-center p-2">
                <div class="relative w-full h-0 pb-[56.25%] overflow-hidden rounded-lg">
                    <iframe
                        class="absolute top-0 left-0 w-full h-full rounded-lg"
                        src="https://www.youtube.com/embed/WrM8Rk7LQgs?autoplay=1&mute=1&controls=0&loop=1&playlist=WrM8Rk7LQgs&start=15"
                        title="YouTube video player"
                        frameborder="0"
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                        allowfullscreen
                    ></iframe>
                </div>
            </div>
        </div>
    </div>

    <!-- Bottom Footer (Second Grid Row) -->
    <div class="w-full bg-gradient-to-r from-stone-200 to-stone-400 p-3 rounded-xl shadow-lg flex flex-col items-center justify-center text-center">
        <h3 class="text-base font-semibold">Accessing Streaming Apps</h3>
        <p class="text-xs text-stone-700 max-w-2xl">
            To enjoy Netflix, Hulu, etc., press the <strong>HOME</strong> button on your remote and select your app.
        </p>
    </div>

    <script>
        // --- CONFIGURATION ---
        const OPENWEATHER_API_KEY = 'b8c65d3e969fa63ecf76eb4ff6069169'; // Your actual OpenWeatherMap API key
        const WEATHER_CITY = 'Tavares'; 

        // --- ELEMENTS ---
        const welcomeMessageEl = document.getElementById('welcome-message');
        const currentDateEl = document.getElementById('current-date');
        const roomInfoEl = document.getElementById('room-info');
        const temperatureEl = document.getElementById('temperature');
        const weatherDescriptionEl = document.getElementById('weather-description');
        const weatherIconEl = document.getElementById('weather-icon');
        const weatherLocationEl = document.getElementById('weather-location');

        // --- WEATHER LOGIC ---
        async function fetchWeather() {
            if (!OPENWEATHER_API_KEY || OPENWEATHER_API_KEY === 'YOUR_OPENWEATHER_API_KEY') {
                console.warn("OpenWeatherMap API key not set.");
                if(weatherDescriptionEl) weatherDescriptionEl.textContent = "Weather data unavailable.";
                return;
            }
            const weatherUrl = `https://api.openweathermap.org/data/2.5/weather?q=${WEATHER_CITY}&appid=${OPENWEATHER_API_KEY}&units=imperial`;

            try {
                const response = await fetch(weatherUrl);
                if (!response.ok) {
                    throw new Error(`API Error: ${response.statusText}`);
                }
                const data = await response.json();

                temperatureEl.textContent = `${Math.round(data.main.temp)}°F`;
                // FIXED: Simplified capitalization by using a CSS class on the element itself.
                weatherDescriptionEl.textContent = data.weather[0].description;
                weatherIconEl.src = `https://openweathermap.org/img/wn/${data.weather[0].icon}@2x.png`;
                weatherLocationEl.textContent = `${data.name}, ${data.sys.country}`;
            } catch (error) {
                console.error("Error fetching weather:", error);
                if(weatherDescriptionEl) weatherDescriptionEl.textContent = "Failed to load weather.";
            }
        }

        // --- CLOCK & DATE LOGIC ---
        function updateClocksAndDate() {
            const now = new Date();
            const timeOptions = { hour: '2-digit', minute: '2-digit', hour12: true };
            const formatTime = (timeZone) => {
                try {
                    return new Intl.DateTimeFormat('en-US', { ...timeOptions, timeZone }).format(now);
                } catch (e) {
                    console.error(`Invalid time zone: ${timeZone}`);
                    return "--:-- --";
                }
            };
            document.getElementById('tavares-time').innerHTML = formatTime('America/New_York').replace(' ', ' <span class="ampm">') + '</span>';
            document.getElementById('london-time').innerHTML = formatTime('Europe/London').replace(' ', ' <span class="ampm">') + '</span>';
            document.getElementById('tokyo-time').innerHTML = formatTime('Asia/Tokyo').replace(' ', ' <span class="ampm">') + '</span>';
            const dateOptions = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            currentDateEl.textContent = new Intl.DateTimeFormat('en-US', dateOptions).format(now);
            const hour = now.getHours();
            let greeting = "Welcome";
            if (hour < 12) { greeting = "Good Morning"; }
            else if (hour < 18) { greeting = "Good Afternoon"; }
            else { greeting = "Good Evening"; }
            const guestName = new URLSearchParams(window.location.search).get('name') || 'Guest';
            welcomeMessageEl.textContent = `${greeting}, ${guestName}`;
        }
       
        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            const roomNumber = new URLSearchParams(window.location.search).get('room');
            if (roomNumber) {
                roomInfoEl.textContent = `Room: ${roomNumber}`;
            }
            fetchWeather();
            updateClocksAndDate(); 
            setInterval(fetchWeather, 300000);
            setInterval(updateClocksAndDate, 1000);
        });
    </script>
</body>
</html>
